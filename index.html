<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile to Particle Conversion</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
function emitParticles(pX, pY, particleCount, spreadAngle, particleSpeed, particleColor, particleSize, duration, gravity = 0, fadeOut = true) {
    const particles = [];
    const halfSpread = spreadAngle / 2;
    const angleIncrement = (spreadAngle / particleCount) * (Math.PI / 180);

    for (let i = 0; i < particleCount; i++) {
        const angle = angleIncrement * i - (halfSpread * (Math.PI / 180));
        const velocityX = Math.cos(angle) * particleSpeed;
        const velocityY = Math.sin(angle) * particleSpeed;

        const particle = {
            x: pX,
            y: pY,
            velocityX: velocityX,
            velocityY: velocityY,
            size: particleSize,
            color: particleColor,
            life: duration, // Particle lifespan
            initialLife: duration,
        };

        particles.push(particle);
    }

    const updateInterval = setInterval(() => {
        if (particles.length === 0) {
            clearInterval(updateInterval); // Stop updating if no particles are left
            return;
        }

        particles.forEach((particle, index) => {
            // Update position
            particle.x += particle.velocityX;
            particle.y += particle.velocityY;

            // Apply gravity
            particle.velocityY += gravity;

            // Reduce life
            particle.life -= 1;

            // Optional: Fade out
            if (fadeOut) {
                const alpha = Math.max(0, particle.life / particle.initialLife);
                particle.color = `rgba(${parseInt(particleColor.slice(1, 3), 16)}, ${parseInt(particleColor.slice(3, 5), 16)}, ${parseInt(particleColor.slice(5, 7), 16)}, ${alpha})`;
            }

            // Draw particle
            drawParticle(particle);

            // Remove dead particles
            if (particle.life <= 0) {
                particles.splice(index, 1);
            }
        });
    }, 16); // ~60 FPS
}

function drawParticle(particle) {
    ctx.beginPath();
    ctx.fillStyle = particle.color;
    ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
    ctx.fill();
}

emitParticles(100, 100, 50, 360, 2, '#FF0000', 5, 100, 0.1, false);

    </script>
</body>
</html>
